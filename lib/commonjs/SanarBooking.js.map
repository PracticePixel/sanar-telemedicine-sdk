{"version":3,"names":["SanarBooking","props","baseUrl","setBaseUrl","useState","useEffect","enable","SanarTelemedicine","session","webUrl","onMessage","event","console","log","canGoBack","data","includes","onEndFlow","styles","container","uri","nativeEvent","StyleSheet","create","height","width","zIndex"],"sources":["SanarBooking.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { View, StyleSheet, SafeAreaView } from 'react-native';\nimport WebView from 'react-native-webview';\nimport Container from './components/Container';\nimport SanarTelemedicine from './SanarTelemedicine';\n\ninterface ITelemedicine {\n    // url: string,\n    onEndFlow: () => void,\n    enable: boolean\n}\n\nconst SanarBooking = ( props: ITelemedicine ) => {\n    const [baseUrl, setBaseUrl] = useState('');\n    useEffect(() => {\n        if(props.enable) {\n            if(SanarTelemedicine.session) {\n                setBaseUrl(SanarTelemedicine.session.webUrl);\n            }\n        }\n    })\n    const onMessage = event => {\n        console.log(event);\n        // if ((!event.canGoBack && event.url==event.data) || (event.data && event.data.includes('home'))) {\n        //     setBaseUrl('');\n        //     props.onEndFlow();\n        // }\n        if ((!event.canGoBack && event.data && event.data.includes('home') )|| (event.canGoBack && event.data && event.data.includes('home'))) {\n            setBaseUrl('');\n            props.onEndFlow();\n        }\n    }\n    if(!props.enable) {\n        return(null);\n    }\n    return (\n        <Container>\n            <View style={styles.container}>\n                <WebView\n                    source={{\n                        uri: baseUrl,\n                    }}\n                    style={styles.container} \n                    incognito\n                    onMessage={(event) => onMessage(event.nativeEvent)}\n                    injectedJavaScript={`\n                        (function() {\n                            function wrap(fn) {\n                            return function wrapper() {\n                                var res = fn.apply(this, arguments);\n                                window.ReactNativeWebView.postMessage(window.location.href);\n                                return res;\n                            }\n                            }\n                            history.pushState = wrap(history.pushState);\n                            history.replaceState = wrap(history.replaceState);\n                            history.go = wrap(history.go);\n                            window.addEventListener('popstate', function() {\n                                window.ReactNativeWebView.postMessage('navigationStateChange');\n                            });\n                        })();\n                        true;\n                    `}\n                    />\n            </View>\n        </Container>\n    );\n}\n\nexport default SanarBooking;\n\nconst styles = StyleSheet.create({\n    container: {\n        height: '100%',\n        width: '100%',\n        zIndex: 8\n        // flex: 1\n    }\n});"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;;;;;AAQA,MAAMA,YAAY,GAAKC,KAAF,IAA4B;EAC7C,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwB,IAAAC,eAAA,EAAS,EAAT,CAA9B;EACA,IAAAC,gBAAA,EAAU,MAAM;IACZ,IAAGJ,KAAK,CAACK,MAAT,EAAiB;MACb,IAAGC,0BAAA,CAAkBC,OAArB,EAA8B;QAC1BL,UAAU,CAACI,0BAAA,CAAkBC,OAAlB,CAA0BC,MAA3B,CAAV;MACH;IACJ;EACJ,CAND;;EAOA,MAAMC,SAAS,GAAGC,KAAK,IAAI;IACvBC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EADuB,CAEvB;IACA;IACA;IACA;;IACA,IAAK,CAACA,KAAK,CAACG,SAAP,IAAoBH,KAAK,CAACI,IAA1B,IAAkCJ,KAAK,CAACI,IAAN,CAAWC,QAAX,CAAoB,MAApB,CAAnC,IAAoEL,KAAK,CAACG,SAAN,IAAmBH,KAAK,CAACI,IAAzB,IAAiCJ,KAAK,CAACI,IAAN,CAAWC,QAAX,CAAoB,MAApB,CAAzG,EAAuI;MACnIb,UAAU,CAAC,EAAD,CAAV;MACAF,KAAK,CAACgB,SAAN;IACH;EACJ,CAVD;;EAWA,IAAG,CAAChB,KAAK,CAACK,MAAV,EAAkB;IACd,OAAO,IAAP;EACH;;EACD,oBACI,6BAAC,kBAAD,qBACI,6BAAC,iBAAD;IAAM,KAAK,EAAEY,MAAM,CAACC;EAApB,gBACI,6BAAC,2BAAD;IACI,MAAM,EAAE;MACJC,GAAG,EAAElB;IADD,CADZ;IAII,KAAK,EAAEgB,MAAM,CAACC,SAJlB;IAKI,SAAS,MALb;IAMI,SAAS,EAAGR,KAAD,IAAWD,SAAS,CAACC,KAAK,CAACU,WAAP,CANnC;IAOI,kBAAkB,EAAG;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAxBgB,EADJ,CADJ,CADJ;AAgCH,CAvDD;;eAyDerB,Y;;;AAEf,MAAMkB,MAAM,GAAGI,uBAAA,CAAWC,MAAX,CAAkB;EAC7BJ,SAAS,EAAE;IACPK,MAAM,EAAE,MADD;IAEPC,KAAK,EAAE,MAFA;IAGPC,MAAM,EAAE,CAHD,CAIP;;EAJO;AADkB,CAAlB,CAAf"}