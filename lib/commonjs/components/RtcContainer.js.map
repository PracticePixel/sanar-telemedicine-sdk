{"version":3,"names":["width","height","Dimensions","get","durationCount","RtcContainer","props","pan","React","useRef","Animated","ValueXY","current","maximizeFrame","setMaximizeFrame","useState","thumbnailMoved","setThumbnailMoved","maxHeight","Value","styles","primaryFrameDimensions","maxWidth","toggleFrame","Keyboard","dismiss","timing","toValue","x","y","duration","useNativeDriver","start","toHeight","toWidth","thumbnailFrameDimensions","panResponder","PanResponder","create","onMoveShouldSetPanResponder","evt","dx","dy","onPanResponderGrant","setOffset","_value","onPanResponderMove","event","onPanResponderRelease","e","gestureState","stickToCorner","I18nManager","isRTL","thresholdWidth","moveXStatus","moveX","isMoved","flattenOffset","spring","container","thumbnailFrame","transform","translateX","translateY","panHandlers","thumbnailClick","children","StyleSheet","position","primaryFrame","borderRadius","backgroundColor","flex","zIndex","buttonHolder","alignItems","flexDirection","justifyContent","button","paddingHorizontal","paddingVertical","buttonText"],"sources":["RtcContainer.js"],"sourcesContent":["import * as React from 'react';\nimport { Dimensions, TouchableOpacity, PanResponder, Animated, StyleSheet, I18nManager, Keyboard } from 'react-native';\nimport Controls from './Controls';\nconst { width, height } = Dimensions.get('window');\n\nvar durationCount = 0;\n\nconst RtcContainer = (props) => {\n    const pan = React.useRef(new Animated.ValueXY()).current;\n    const [maximizeFrame, setMaximizeFrame] = React.useState(true);\n    const [thumbnailMoved, setThumbnailMoved] = React.useState(false);\n\n    var maxHeight = React.useRef(new Animated.Value(styles.primaryFrameDimensions.height)).current;\n    var maxWidth = React.useRef(new Animated.Value(styles.primaryFrameDimensions.width)).current;\n\n    // maximize or minimize video frame\n    const toggleFrame = () => {\n        Keyboard.dismiss()\n        if (thumbnailMoved) {\n            Animated.timing(pan, {\n                toValue: { x: 0, y: 0 },\n                duration: 500,\n                useNativeDriver: false,\n            }).start();\n        }\n        setMaximizeFrame(!maximizeFrame);\n        var toHeight, toWidth;\n        if (maximizeFrame) {\n            toHeight = styles.thumbnailFrameDimensions.height;\n            toWidth = styles.thumbnailFrameDimensions.width;\n        } else {\n            toHeight = styles.primaryFrameDimensions.height;\n            toWidth = styles.primaryFrameDimensions.width;\n        }\n\n        Animated.timing(\n            maxHeight,\n            {\n                toValue: toHeight,\n                duration: 500,\n                useNativeDriver: false\n            }\n        ).start();\n        Animated.timing(\n            maxWidth,\n            {\n                toValue: toWidth,\n                duration: 500,\n                useNativeDriver: false\n            }\n        ).start();\n    }\n\n    // pan responder start\n    const panResponder = React.useRef(\n        PanResponder.create({\n            // onMoveShouldSetPanResponder: () => true,\n            onMoveShouldSetPanResponder: (evt, { dx, dy }) => {\n                if (dx > 10 || dy > 10) {\n                    return true;\n                }\n                return false;\n            },\n            onPanResponderGrant: () => {\n                pan.setOffset({\n                    x: pan.x._value,\n                    y: pan.y._value\n                });\n            },\n            onPanResponderMove: Animated.event(\n                [\n                    null,\n                    { dx: pan.x, dy: pan.y },\n                ],\n                { useNativeDriver: false }\n            ),\n            onPanResponderRelease: (e, gestureState) => {\n                const stickToCorner = I18nManager.isRTL ? styles.thumbnailFrameDimensions.width - width : width - styles.thumbnailFrameDimensions.width;\n                const thresholdWidth = width / 2;\n                const moveXStatus = I18nManager.isRTL ? (gestureState.moveX < thresholdWidth) : (gestureState.moveX > thresholdWidth);\n                const isMoved = moveXStatus ? true : false;\n                const moveX = isMoved ? stickToCorner : 0;\n                setThumbnailMoved(isMoved);\n                pan.flattenOffset();\n                Animated.spring(pan, {\n                    toValue: { x: moveX, y: 0 },\n                    useNativeDriver: false\n                },\n                ).start();\n            }\n        })\n    ).current;\n    // pan responder end\n\n    return (\n        <>\n            <Animated.View\n                style={[\n                    styles.container, styles.thumbnailFrame,\n                    { height: maxHeight, width: maxWidth },\n                    {\n                        transform: [\n                            { translateX: pan.x },\n                            { translateY: pan.y }\n                        ]\n                    }\n                ]}\n                {...panResponder.panHandlers} >\n                <TouchableOpacity\n                    style={[styles.container, { height: '100%', width: '100%' }, styles.thumbnailClick]}\n                    onPress={toggleFrame}>\n                    {props.children}\n                </TouchableOpacity>\n            </Animated.View>\n\n            {(maximizeFrame) &&\n                <Controls toggleFrame={toggleFrame} />\n            }\n        </>\n    )\n};\n\nexport default RtcContainer;\n\nconst styles = StyleSheet.create({\n    container: {\n        // backgroundColor: theme.colors.callBackground,\n        position: 'absolute'\n    },\n    primaryFrame: {\n        // backgroundColor: theme.colors.callBackground,\n        borderRadius: 5\n    },\n    thumbnailFrame: {\n        backgroundColor: \"grey\",\n        borderRadius: 5\n    },\n    thumbnailFrameDimensions: {\n        height: 250,\n        width: 150\n    },\n    primaryFrameDimensions: {\n        height: height + 100,\n        width: width\n    },\n    thumbnailClick: {\n        flex: 1,\n        zIndex: 99999\n    },\n    // controls\n    buttonHolder: {\n        height: 100,\n        alignItems: 'center',\n        flex: 1,\n        flexDirection: 'row',\n        justifyContent: 'space-evenly',\n    },\n    button: {\n        paddingHorizontal: 20,\n        paddingVertical: 10,\n        backgroundColor: '#0093E9',\n        borderRadius: 25,\n    },\n    buttonText: {\n        // color: '#fff',\n    },\n});\n"],"mappings":"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"}