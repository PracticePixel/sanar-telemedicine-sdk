{"version":3,"names":["info","io","getInfo","DeviceInfo","SanarTelemedicine","Connect","cid","did","getUniqueId","status","data","error_message","console","log","eventListner","messagingUrl","query","uid","session","error","Disconnect","disconnect"],"sources":["SanarTelemedicine.ts"],"sourcesContent":["// @ts-ignore\nimport { info } from 'console';\nimport io from 'socket.io-client';\nimport { getInfo } from './utils';\nimport DeviceInfo from 'react-native-device-info';\n\ntype UserInfoType = {\n    connectUrl: string,\n    bookingUrl: string,\n    sanarToken: string\n}\n\nexport interface SanarTelemedicineInterface {\n    Connect(\n        cid: string,\n        info: any\n    ): Promise<boolean>,\n    Disconnect(): void,\n}\n\nclass SanarTelemedicine implements SanarTelemedicineInterface {\n\n    public eventListner: any;\n    public session: any;\n    public info: any;\n\n    async Connect(cid: string, info: any) {\n        try {\n            let did = await DeviceInfo.getUniqueId();\n            const { status, data, error_message } = await getInfo(cid, info);\n            console.log('data from sanar : ', data, status, error_message);\n            if (status == 1000) {\n                this.eventListner = io(data.messagingUrl, { query: `uid=${data.uid}&did=${did}` });\n                this.session = data;\n                this.info = info;\n                return true;\n            } else {\n                console.log(\"Error : \", error_message);\n                return false;\n            };\n        } catch (error) {\n            throw error;\n        }\n    };\n\n    Disconnect() {\n        if (this.eventListner) {\n            this.eventListner.disconnect();\n            console.log(\"Socket Disconnected\");\n        }\n    };\n\n};\n\nexport default new SanarTelemedicine();"],"mappings":"AAAA;AACA,SAASA,IAAT,QAAqB,SAArB;AACA,OAAOC,EAAP,MAAe,kBAAf;AACA,SAASC,OAAT,QAAwB,SAAxB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;;AAgBA,MAAMC,iBAAN,CAA8D;EAM7C,MAAPC,OAAO,CAACC,GAAD,EAAcN,IAAd,EAAyB;IAClC,IAAI;MACA,IAAIO,GAAG,GAAG,MAAMJ,UAAU,CAACK,WAAX,EAAhB;MACA,MAAM;QAAEC,MAAF;QAAUC,IAAV;QAAgBC;MAAhB,IAAkC,MAAMT,OAAO,CAACI,GAAD,EAAMN,IAAN,CAArD;MACAY,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCH,IAAlC,EAAwCD,MAAxC,EAAgDE,aAAhD;;MACA,IAAIF,MAAM,IAAI,IAAd,EAAoB;QAChB,KAAKK,YAAL,GAAoBb,EAAE,CAACS,IAAI,CAACK,YAAN,EAAoB;UAAEC,KAAK,EAAG,OAAMN,IAAI,CAACO,GAAI,QAAOV,GAAI;QAApC,CAApB,CAAtB;QACA,KAAKW,OAAL,GAAeR,IAAf;QACA,KAAKV,IAAL,GAAYA,IAAZ;QACA,OAAO,IAAP;MACH,CALD,MAKO;QACHY,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBF,aAAxB;QACA,OAAO,KAAP;MACH;;MAAA;IACJ,CAbD,CAaE,OAAOQ,KAAP,EAAc;MACZ,MAAMA,KAAN;IACH;EACJ;;EAEDC,UAAU,GAAG;IACT,IAAI,KAAKN,YAAT,EAAuB;MACnB,KAAKA,YAAL,CAAkBO,UAAlB;MACAT,OAAO,CAACC,GAAR,CAAY,qBAAZ;IACH;EACJ;;AA9ByD;;AAgC7D;AAED,eAAe,IAAIT,iBAAJ,EAAf"}